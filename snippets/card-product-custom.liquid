<div class="card-product">
    <a href="{{ product_card.url }}" class="card-product__link">
        <div class="card-product__image-wrapper">
            {%- comment -%} 1枚目の画像（メイン） {%- endcomment -%}
            {%- if product_card.featured_image -%}
                <img
                    class="card-product__image card-product__image--primary"
                    src="{{ product_card.featured_image | image_url: width: 550 }}"
                    alt="{{ product_card.featured_image.alt | escape }}"
                    width="{{ product_card.featured_image.width }}"
                    height="{{ product_card.featured_image.height }}"
                    loading="lazy"
                >
            {%- endif -%}

            {%- comment -%} 2枚目の画像（ホバー用） {%- endcomment -%}
            {%- if product_card.images[1] != blank -%}
                <img
                    class="card-product__image card-product__image--secondary"
                    src="{{ product_card.images[1] | image_url: width: 550 }}"
                    alt="{{ product_card.images[1].alt | escape }}"
                    width="{{ product_card.images[1].width }}"
                    height="{{ product_card.images[1].height }}"
                    loading="lazy"
                >
            {%- endif -%}

            <div class="card-product__badges">
                {%- unless product_card.available -%}
                    <span class="card-product__badge card-product__badge--sold-out">売り切れ</span>
                {%- endunless -%}
                {%- if product_card.compare_at_price > product_card.price and product_card.available -%}
                    <span class="card-product__badge card-product__badge--sale">SALE</span>
                {%- endif -%}
            </div>
        </div>

        <div class="card-product__info">
            <div class="card-product__info-head">
                <h3 class="card-product__title">{{ product_card.title }}</h3>
                {%- if product_card.metafields.custom.size != blank -%}
                    <p class="card-product__meta">{{ product_card.metafields.custom.size }}</p>
                {%- endif -%}
            </div>

            {%- if product_card.metafields.custom.genre != blank -%}
                <p class="card-product__meta">{{ product_card.metafields.custom.genre }}</p>
            {%- endif -%}

            {%- if product_card.metafields.custom.features.value != blank -%}
                <div class="card-product__features">
                    {%- for feature in product_card.metafields.custom.features.value -%}
                        <span class="card-product__feature-tag">{{ feature }}</span>
                    {%- endfor -%}
                </div>
            {%- endif -%}

            <div class="card-product__price">{{ product_card.price | money }}</div>
        </div>
    </a>
</div>