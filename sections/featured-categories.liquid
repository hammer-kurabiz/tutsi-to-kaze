{%- style -%}
    #shopify-section-{{ section.id }} {
        --section-background-color: {{ section.settings.background_color }};
        --section-padding-top-desktop: {{ section.settings.padding_top }}px;
        --section-padding-bottom-desktop: {{ section.settings.padding_bottom }}px;
        --section-padding-top-mobile: {{ section.settings.padding_top | times: 0.5 | round }}px;
        --section-padding-bottom-mobile: {{ section.settings.padding_bottom | times: 0.5 | round }}px;
    }
{%- endstyle -%}

<div class="featured-categories-wrapper" style="background-color: var(--section-background-color);">
    <div class="featured-categories page-width">
        {%- render 'section-title',
            heading: section.settings.heading,
            subheading: section.settings.subheading,
            text_alignment: section.settings.title_text_alignment,
            padding_top: section.settings.title_padding_top,
            padding_bottom: section.settings.title_padding_bottom,
            subheading_color: section.settings.title_subheading_color
        -%}

        <ul class="featured-categories__grid">
        {%- for block in section.blocks -%}
            <li class="featured-categories__item">
            <a href="{{ block.settings.link }}" class="featured-categories__link">
                <div class="featured-categories__image-wrapper">
                    {%- if block.settings.image != blank -%}
                        {{ block.settings.image | image_url: width: 400 | image_tag: loading: 'lazy' }}
                    {%- else -%}
                        {{ 'image' | placeholder_svg_tag: 'shopify-section-placeholder__image' }}
                    {%- endif -%}
                </div>
                {%- if block.settings.title != blank -%}
                    <p class="featured-categories__title">{{ block.settings.title }}</p>
                {%- endif -%}
            </a>
            </li>
        {%- endfor -%}
        </ul>
    </div>
</div>

{% schema %}
    {
    "name": "【カスタム】特集カテゴリー",
    "class": "shopify-section--featured-categories",
    "settings": [
        {
            "type": "color",
            "id": "background_color",
            "label": "背景色",
            "default": "#f4f5f5"
        },
        {
            "type": "text",
            "id": "heading",
            "label": "見出し",
            "default": "カテゴリー"
        },
        {
            "type": "text",
            "id": "subheading",
            "label": "背景のテキスト",
            "default": "CATEGORY"
        },
        {
            "type": "header",
            "content": "セクションの余白"
        },
        {
            "type": "range",
            "id": "padding_top",
            "min": 0,
            "max": 200,
            "step": 10,
            "unit": "px",
            "label": "上の余白（PC）",
            "default": 50
        },
        {
            "type": "range",
            "id": "padding_bottom",
            "min": 0,
            "max": 200,
            "step": 10,
            "unit": "px",
            "label": "下の余白（PC）",
            "default": 50
        },
        {
            "type": "header",
            "content": "タイトルの設定"
        },
        {
            "type": "color",
            "id": "title_subheading_color",
            "label": "背景テキストの色",
            "default": "#f4f5f5"
        },
        {
            "type": "select",
            "id": "title_text_alignment",
            "label": "タイトルの配置",
            "options": [
                { "value": "center", "label": "中央揃え" },
                { "value": "left", "label": "左揃え" }
            ],
            "default": "center"
        },
        {
            "type": "range",
            "id": "title_padding_top",
            "min": 0,
            "max": 200,
            "step": 10,
            "unit": "px",
            "label": "タイトルの上の余白",
            "default": 30
        },
        {
            "type": "range",
            "id": "title_padding_bottom",
            "min": 0,
            "max": 200,
            "step": 10,
            "unit": "px",
            "label": "タイトルの下の余白",
            "default": 30
        }
    ],
    "blocks": [
        {
        "type": "category",
        "name": "カテゴリー",
        "limit": 10,
        "settings": [
            {
            "type": "image_picker",
            "id": "image",
            "label": "画像"
            },
            {
            "type": "text",
            "id": "title",
            "label": "タイトル",
            "default": "カテゴリー名"
            },
            {
            "type": "url",
            "id": "link",
            "label": "リンク先"
            }
        ]
        }
    ],
    "presets": [
        {
        "name": "【カスタム】特集カテゴリー",
        "blocks": [
            { "type": "category" },
            { "type": "category" },
            { "type": "category" },
            { "type": "category" }
        ]
        }
    ]
    }
{% endschema %}