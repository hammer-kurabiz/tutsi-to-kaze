{%- style -%}
    #shopify-section-{{ section.id }} .featured-news {
        --section-padding-top-desktop: {{ section.settings.padding_top_desktop }}px;
        --section-padding-bottom-desktop: {{ section.settings.padding_bottom_desktop }}px;
        --section-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
        --section-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
    }
{%- endstyle -%}

<div class="featured-news-section">
    <div class="featured-news page-width">
        {%- render 'section-title',
            heading: section.settings.heading,
            subheading: section.settings.subheading,
            padding_top: section.settings.title_padding_top,
            padding_bottom: section.settings.title_padding_bottom
        -%}

        <div class="featured-news__list">
            {%- liquid
            assign blog = section.settings.blog
            assign post_limit = section.settings.post_limit
            -%}

            {%- if blog.articles.size > 0 -%}
                {%- for article in blog.articles limit: post_limit -%}
                    <a href="{{ article.url }}" class="featured-news__item">
                    <span class="featured-news__date">{{ article.published_at | date: "%Y.%m.%d" }}</span>
                    {%- if article.tags.size > 0 and section.settings.show_tags -%}
                        <span class="featured-news__tag">{{ article.tags.first }}</span>
                    {%- endif -%}
                    <h3 class="featured-news__title">{{ article.title }}</h3>
                    </a>
                {%- endfor -%}
                {%- else -%}
                {%- for i in (1..post_limit) -%}
                    <div class="featured-news__item featured-news__item--placeholder">
                    <span class="featured-news__date">2025.00.00</span>
                    <span class="featured-news__tag">お知らせ</span>
                    <h3 class="featured-news__title">お知らせのタイトルがここに入ります</h3>
                    </div>
                {%- endfor -%}
            {%- endif -%}
        </div>

        {% comment %} {%- if section.settings.button_label != blank -%}
            <div class="featured-news__button-wrapper">
                {%- render 'button-custom', label: section.settings.button_label, url: blog.url -%}
            </div>
        {%- endif -%} {% endcomment %}
    </div>
</div>

{% schema %}
    {
        "name": "【カスタム】お知らせ",
        "class": "shopify-section--featured-news",
        "settings": [
            {
                "type": "header",
                "content": "セクションの余白"
            },
            {
                "type": "range",
                "id": "padding_top_desktop",
                "min": 0,
                "max": 200,
                "step": 10,
                "unit": "px",
                "label": "上の余白（PC）",
                "default": 50
            },
            {
                "type": "range",
                "id": "padding_bottom_desktop",
                "min": 0,
                "max": 200,
                "step": 10,
                "unit": "px",
                "label": "下の余白（PC）",
                "default": 50
            },
            {
                "type": "range",
                "id": "padding_top_mobile",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "px",
                "label": "上の余白（スマホ）",
                "default": 30
            },
            {
                "type": "range",
                "id": "padding_bottom_mobile",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "px",
                "label": "下の余白（スマホ）",
                "default": 30
            },
            {
                "type": "header",
                "content": "タイトルの余白"
            },
            {
                "type": "range",
                "id": "title_padding_top",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "px",
                "label": "タイトルの上の余白",
                "default": 30
            },
            {
                "type": "range",
                "id": "title_padding_bottom",
                "min": 0,
                "max": 100,
                "step": 5,
                "unit": "px",
                "label": "タイトルの下の余白",
                "default": 30
            },
            {
                "type": "text",
                "id": "heading",
                "label": "見出し",
                "default": "お知らせ"
            },
            {
                "type": "text",
                "id": "subheading",
                "label": "背景のテキスト",
                "default": "NEWS"
            },
            {
                "type": "blog",
                "id": "blog",
                "label": "表示するお知らせ（ブログを選択）"
            },
            {
                "type": "range",
                "id": "post_limit",
                "min": 2,
                "max": 4,
                "step": 1,
                "default": 3,
                "label": "表示する記事の数"
            },
            {
                "type": "checkbox",
                "id": "show_tags",
                "label": "タグを表示する",
                "default": true
            },
            {
                "type": "text",
                "id": "button_label",
                "label": "「すべて見る」ボタンのラベル",
                "default": "すべてのお知らせを見る"
            }
        ],
        "presets": [
            {
                "name": "【カスタム】お知らせ"
            }
        ]
    }
{% endschema %}